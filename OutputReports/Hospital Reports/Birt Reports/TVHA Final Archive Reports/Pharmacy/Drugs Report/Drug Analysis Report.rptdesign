<?xml version="1.0" encoding="UTF-8"?>
<report xmlns="http://www.eclipse.org/birt/2005/design" version="3.2.23" id="1">
    <property name="createdBy">Eclipse BIRT Designer Version 4.5.0.v201506092134 Build &lt;@BUILD@></property>
    <list-property name="propertyBindings">
        <structure>
            <property name="name">queryText</property>
            <property name="id">5</property>
        </structure>
        <structure>
            <property name="name">queryTimeOut</property>
            <property name="id">5</property>
        </structure>
        <structure>
            <property name="name">rowFetchSize</property>
            <property name="id">5</property>
        </structure>
    </list-property>
    <property name="units">in</property>
    <property name="iconFile">/templates/blank_report.gif</property>
    <property name="layoutPreference">fixed layout</property>
    <property name="bidiLayoutOrientation">ltr</property>
    <property name="imageDPI">96</property>
    <parameters>
        <scalar-parameter name="Date" id="6">
            <text-property name="promptText">Please Enter date (dd-MM-yyyy)</text-property>
            <property name="valueType">static</property>
            <property name="isRequired">true</property>
            <property name="dataType">date</property>
            <property name="distinct">true</property>
            <list-property name="selectionList"/>
            <property name="paramType">simple</property>
            <property name="concealValue">false</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Custom</property>
                <property name="pattern">dd-MM-yyyy</property>
            </structure>
        </scalar-parameter>
    </parameters>
    <data-sources>
        <oda-data-source extensionID="org.eclipse.birt.report.data.oda.jdbc" name="Data Source" id="4">
            <list-property name="privateDriverProperties">
                <ex-property>
                    <name>metadataBidiFormatStr</name>
                    <value>ILYNN</value>
                </ex-property>
                <ex-property>
                    <name>disabledMetadataBidiFormatStr</name>
                </ex-property>
                <ex-property>
                    <name>contentBidiFormatStr</name>
                    <value>ILYNN</value>
                </ex-property>
                <ex-property>
                    <name>disabledContentBidiFormatStr</name>
                </ex-property>
            </list-property>
            <property name="odaDriverClass">com.mysql.jdbc.Driver</property>
            <property name="odaURL">jdbc:mysql://192.168.0.25/bir_upgraded</property>
            <property name="odaUser">birt</property>
            <encrypted-property name="odaPassword" encryptionID="base64">YmlydA==</encrypted-property>
        </oda-data-source>
    </data-sources>
    <data-sets>
        <oda-data-set extensionID="org.eclipse.birt.report.data.oda.jdbc.JdbcSelectDataSet" name="Data Set" id="5">
            <list-property name="columnHints">
                <structure>
                    <property name="columnName">brands</property>
                    <property name="analysis">dimension</property>
                    <text-property name="displayName">brands</text-property>
                    <text-property name="heading">brands</text-property>
                </structure>
                <structure>
                    <property name="columnName">frm</property>
                    <property name="analysis">dimension</property>
                    <text-property name="displayName">frm</text-property>
                    <text-property name="heading">frm</text-property>
                </structure>
                <structure>
                    <property name="columnName">receiptquantity1</property>
                    <property name="analysis">measure</property>
                    <text-property name="displayName">receiptquantity1</text-property>
                    <text-property name="heading">receiptquantity1</text-property>
                </structure>
                <structure>
                    <property name="columnName">receiptquantity</property>
                    <property name="analysis">measure</property>
                    <text-property name="displayName">receiptquantity</text-property>
                    <text-property name="heading">receiptquantity</text-property>
                </structure>
                <structure>
                    <property name="columnName">returnquantity</property>
                    <property name="analysis">measure</property>
                    <text-property name="displayName">returnquantity</text-property>
                    <text-property name="heading">returnquantity</text-property>
                </structure>
                <structure>
                    <property name="columnName">totalstock</property>
                    <property name="analysis">measure</property>
                    <text-property name="displayName">totalstock</text-property>
                    <text-property name="heading">totalstock</text-property>
                </structure>
                <structure>
                    <property name="columnName">isq</property>
                    <property name="analysis">measure</property>
                    <text-property name="displayName">isq</text-property>
                    <text-property name="heading">isq</text-property>
                </structure>
                <structure>
                    <property name="columnName">expireddrugs</property>
                    <property name="analysis">measure</property>
                    <text-property name="displayName">expireddrugs</text-property>
                    <text-property name="heading">expireddrugs</text-property>
                </structure>
                <structure>
                    <property name="columnName">Rates11</property>
                    <property name="analysis">measure</property>
                    <text-property name="displayName">Rates11</text-property>
                    <text-property name="heading">Rates11</text-property>
                </structure>
                <structure>
                    <property name="columnName">clsstckqty</property>
                    <property name="analysis">measure</property>
                    <text-property name="displayName">clsstckqty</text-property>
                    <text-property name="heading">clsstckqty</text-property>
                </structure>
                <structure>
                    <property name="columnName">clsstckval</property>
                    <property name="analysis">measure</property>
                    <text-property name="displayName">clsstckval</text-property>
                    <text-property name="heading">clsstckval</text-property>
                </structure>
                <structure>
                    <property name="columnName">description</property>
                    <property name="analysis">dimension</property>
                    <text-property name="displayName">description</text-property>
                    <text-property name="heading">description</text-property>
                </structure>
                <structure>
                    <property name="columnName">receipt_No</property>
                    <property name="analysis">dimension</property>
                    <text-property name="displayName">receipt_No</text-property>
                    <text-property name="heading">receipt_No</text-property>
                </structure>
            </list-property>
            <list-property name="parameters">
                <structure>
                    <property name="name">param_1</property>
                    <property name="paramName">Date</property>
                    <property name="nativeName"></property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">-1</property>
                    <property name="position">1</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_2</property>
                    <property name="paramName">Date</property>
                    <property name="nativeName"></property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">-1</property>
                    <property name="position">2</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_3</property>
                    <property name="paramName">Date</property>
                    <property name="nativeName"></property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">-1</property>
                    <property name="position">3</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_4</property>
                    <property name="paramName">Date</property>
                    <property name="nativeName"></property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">-1</property>
                    <property name="position">4</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_5</property>
                    <property name="paramName">Date</property>
                    <property name="nativeName"></property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">-1</property>
                    <property name="position">5</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_6</property>
                    <property name="paramName">Date</property>
                    <property name="nativeName"></property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">-1</property>
                    <property name="position">6</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_7</property>
                    <property name="paramName">Date</property>
                    <property name="nativeName"></property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">-1</property>
                    <property name="position">7</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_8</property>
                    <property name="paramName">Date</property>
                    <property name="nativeName"></property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">-1</property>
                    <property name="position">8</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_9</property>
                    <property name="paramName">Date</property>
                    <property name="nativeName"></property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">-1</property>
                    <property name="position">9</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_10</property>
                    <property name="paramName">Date</property>
                    <property name="nativeName"></property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">-1</property>
                    <property name="position">10</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
            </list-property>
            <structure name="cachedMetaData">
                <list-property name="resultSet">
                    <structure>
                        <property name="position">1</property>
                        <property name="name">brands</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">2</property>
                        <property name="name">frm</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">3</property>
                        <property name="name">receiptquantity1</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">4</property>
                        <property name="name">receiptquantity</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">5</property>
                        <property name="name">returnquantity</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">6</property>
                        <property name="name">totalstock</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">7</property>
                        <property name="name">isq</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">8</property>
                        <property name="name">expireddrugs</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">9</property>
                        <property name="name">Rates11</property>
                        <property name="dataType">float</property>
                    </structure>
                    <structure>
                        <property name="position">10</property>
                        <property name="name">clsstckqty</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">11</property>
                        <property name="name">clsstckval</property>
                        <property name="dataType">float</property>
                    </structure>
                    <structure>
                        <property name="position">12</property>
                        <property name="name">description</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">13</property>
                        <property name="name">receipt_No</property>
                        <property name="dataType">string</property>
                    </structure>
                </list-property>
            </structure>
            <property name="dataSource">Data Source</property>
            <list-property name="resultSet">
                <structure>
                    <property name="position">1</property>
                    <property name="name">brands</property>
                    <property name="nativeName">brands</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">12</property>
                </structure>
                <structure>
                    <property name="position">2</property>
                    <property name="name">frm</property>
                    <property name="nativeName">frm</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">12</property>
                </structure>
                <structure>
                    <property name="position">3</property>
                    <property name="name">receiptquantity1</property>
                    <property name="nativeName">receiptquantity1</property>
                    <property name="dataType">decimal</property>
                    <property name="nativeDataType">-5</property>
                </structure>
                <structure>
                    <property name="position">4</property>
                    <property name="name">receiptquantity</property>
                    <property name="nativeName">receiptquantity</property>
                    <property name="dataType">decimal</property>
                    <property name="nativeDataType">3</property>
                </structure>
                <structure>
                    <property name="position">5</property>
                    <property name="name">returnquantity</property>
                    <property name="nativeName">returnquantity</property>
                    <property name="dataType">decimal</property>
                    <property name="nativeDataType">-5</property>
                </structure>
                <structure>
                    <property name="position">6</property>
                    <property name="name">totalstock</property>
                    <property name="nativeName">totalstock</property>
                    <property name="dataType">decimal</property>
                    <property name="nativeDataType">3</property>
                </structure>
                <structure>
                    <property name="position">7</property>
                    <property name="name">isq</property>
                    <property name="nativeName">isq</property>
                    <property name="dataType">decimal</property>
                    <property name="nativeDataType">3</property>
                </structure>
                <structure>
                    <property name="position">8</property>
                    <property name="name">expireddrugs</property>
                    <property name="nativeName">expireddrugs</property>
                    <property name="dataType">decimal</property>
                    <property name="nativeDataType">3</property>
                </structure>
                <structure>
                    <property name="position">9</property>
                    <property name="name">Rates11</property>
                    <property name="nativeName">Rates11</property>
                    <property name="dataType">float</property>
                    <property name="nativeDataType">8</property>
                </structure>
                <structure>
                    <property name="position">10</property>
                    <property name="name">clsstckqty</property>
                    <property name="nativeName">clsstckqty</property>
                    <property name="dataType">decimal</property>
                    <property name="nativeDataType">3</property>
                </structure>
                <structure>
                    <property name="position">11</property>
                    <property name="name">clsstckval</property>
                    <property name="nativeName">clsstckval</property>
                    <property name="dataType">float</property>
                    <property name="nativeDataType">8</property>
                </structure>
                <structure>
                    <property name="position">12</property>
                    <property name="name">description</property>
                    <property name="nativeName">description</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">12</property>
                </structure>
                <structure>
                    <property name="position">13</property>
                    <property name="name">receipt_No</property>
                    <property name="nativeName">receipt_No</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">12</property>
                </structure>
            </list-property>
            <xml-property name="queryText"><![CDATA[SELECT brands,CONCAT(formulations ,' ',dozages) AS frm,receiptquantity1,IFNULL((receiptquantity),0) AS receiptquantity,returnquantity,ABS(receiptquantity1+receiptquantity-returnquantity) AS totalstock,isq,expireddrugs,Rates11,
ABS(ABS(receiptquantity1+receiptquantity-returnquantity)-expireddrugs-isq) AS clsstckqty,Rates11*ABS(ABS(receiptquantity1+receiptquantity-returnquantity)-expireddrugs-isq) AS clsstckval,description ,receipt_No FROM

(SELECT drug_id, brnds1 AS brands,formultion1 AS formulations,form,
doses  AS dozages, balll,IFNULL(receiptquantity1,0) AS receiptquantity1,(receiptqty+receiptstore) AS receiptquantity,isq,IFNULL(returnquantity,0) AS returnquantity,

ROUND(rates1,2) AS Rates11,expireddrugs,description,receipt_No
 FROM 
 (SELECT drug_id, CASE WHEN brandname1 IS NULL THEN bnames ELSE brandname1 END AS brnds1,form,CASE WHEN formulation1 IS NULL THEN formnames ELSE formulation1 END AS formultion1,CASE WHEN dozage1 IS NULL THEN dose ELSE dozage1 END AS doses
 ,balll,receiptquantity1,receiptqty,receiptstore,rates1,isq,returnquantity,IFNULL(expireddrugs,0) AS expireddrugs,description,receipt_No FROM

( SELECT drug_id, brandname1,form,bnames,formulation1,formnames,dozage1,dose,balll,
  receiptquantity1,receiptqty,receiptstore,rates1, isq,returnquantity,expireddrugs ,description,receipt_No FROM
 (SELECT drug_id, brandname1,form,formulation1,dozage1,receiptquantity1,receiptqty,openb,IFNULL(receiptstore,0) AS receiptstore,rates1, isq,returnquantity ,ic,balll ,description,receipt_No FROM
 (SELECT drug_id, brandname1,form,formulation1,dozage1,receiptquantity1,IFNULL(receiptqty,0) AS receiptqty ,rates1, isq,returnquantity ,ic,balll,description,receipt_No FROM
(SELECT drug_id,brandname1,form,formulation1,dozage1,receiptquantity1,rates1,isq,IFNULL(returnquantity,0) AS returnquantity ,ic,balll,description,receipt_No FROM
(SELECT drug_id,brandname1,form,formulation1,dozage1,receiptquantity1,rates1 ,IFNULL(isq,0) AS isq,ic,balll ,description,receipt_No FROM
(
SELECT drug_id,brandname1,form,formulation1,dozage1,receiptquantity1,rates1,unit_price1,VAT1,mrp_price1,waiver_percetage1,waiver_amount1,cgst1,cgst_amount1,sgst1,sgst_amount1,dateexpire1,
totalamount1,CASE WHEN totalamountaftergst1 IS NULL THEN '0.00' ELSE totalamountaftergst1 END AS totalamountaftergst1,receipt_No1,description1,storname1 ,ic,balll,description,receipt_No FROM
(SELECT storename,id FROM
(SELECT NAME AS storename,ist.id FROM inventory_store ist 
INNER JOIN inventory_store_drug_transaction isdt ON ist.id=isdt.store_id
GROUP BY isdt.store_id
)amb
WHERE storename IN("Main Store","Pharmacy")
AND storename LIKE 'Pharmacy' 
)amb1
LEFT JOIN 
(SELECT drug_id,brandname1,form,formulation1,receiptquantity1,dozage1 , CASE WHEN VAT1=0.0 THEN ((Rate1+IFNULL((Rate1*1*cgst1*.01),0)+IFNULL((Rate1*1*sgst1*.01),0))) ELSE (Rate1+(1*VAT1*IFNULL(unit_price1,0)*.01)) END AS rates1
,unit_price1,VAT1,company_name,mrp_price1,waiver_percetage1,CASE WHEN waiver_amount IS NULL THEN '0.00' ELSE waiver_amount END AS waiver_amount1,cgst1,cgst_amount1,sgst1,sgst_amount1,
dateexpire1,
 CASE WHEN totalamount IS NULL THEN '0.00' ELSE totalamount END AS totalamount1,CASE WHEN VAT1!=0.00 THEN ROUND((totalamount+ROUND(((VAT1*receiptquantity1*Rate1)/100),2)-waiver_amount),2) ELSE ROUND((totalamount+cgst_amount1+sgst_amount1-waiver_amount),2) END AS totalamountaftergst1,
 receipt_No1,description1,storname1,storeid1 ,exps ,ic,balll,description,receipt_No FROM
(
SELECT idt.id AS trans,i.drug_id,idf.id AS form,id.name AS brandname1,idf.name AS formulation1,idf.dozage AS dozage1,
IFNULL(ambiks.rect,0) AS receiptquantity1,idt.store_id,ist.name,
CASE WHEN ph1.Rate1 IS NULL THEN '0.00' ELSE ph1.Rate1 END AS Rate1,CASE WHEN ph1.unit_price1 IS NULL THEN '0.00' ELSE ph1.unit_price1 END AS unit_price1,CASE WHEN ph1.VAT1 IS NULL  THEN '0.00' ELSE ph1.VAT1 END AS VAT1,i.company_name,ph1.mrp_price1 AS mrp_price1,
ph1.waiver_percetage1 AS waiver_percetage1,
CASE WHEN ph1.waiver_percetage1=0 THEN '0.00' ELSE ROUND(((ph1.waiver_percetage1*ph.balc*ph1.Rate1)/100),2) END AS waiver_amount,CASE WHEN ph1.cgst1 IS NULL  THEN '0.00' ELSE ph1.cgst1 END AS cgst1,
CASE WHEN ph1.cgst1 IS NULL  THEN '0.00' ELSE ROUND(((ph1.cgst1*ph.balc*ph1.unit_price1)/100),2) END AS cgst_amount1,CASE WHEN ph1.sgst1 IS NULL  THEN '0.00' ELSE ph1.sgst1 END AS sgst1,
CASE WHEN ph1.sgst1 IS NULL THEN '0.00' ELSE ROUND(((ph1.sgst1*ph.balc*ph1.unit_price1)/100),2) END AS sgst_amount1,ROUND((ph.balc * ph1.Rate1),2) AS totalamount,
i.date_expiry,idt.receipt_No AS receipt_No1,idt.description AS description1,ist.name AS storname1,idt.store_id AS storeid1,
DATE(i.date_expiry) AS dateexpire1,i.expire_status AS exps,ic,balll,ph1.description AS description,ph1.receipt_No AS receipt_No

FROM inventory_store_drug_transaction_detail i
INNER JOIN inventory_store_drug_transaction idt ON i.transaction_id=idt.id
INNER JOIN inventory_drug id ON i.drug_id=id.id
INNER JOIN inventory_drug_formulation idf ON i.formulation_id=idf.id
INNER JOIN inventory_drug_category ic ON id.category_id=ic.id
INNER JOIN  inventory_store ist ON ist.id=idt.store_id
INNER JOIN (  SELECT trans AS transs,balc AS rect,balll,amk.did AS dnd,amk.formlt AS formlt,amk.icd AS ic FROM
 (SELECT MAX(i.transaction_id) AS trans,i.drug_id AS did ,i.formulation_id AS formlt,MAX(DATE(i.created_on)) AS icd FROM `inventory_store_drug_transaction_detail` i 
INNER JOIN inventory_store_drug_transaction idt ON i.transaction_id=idt.id 
WHERE DATE(i.created_on)<=? GROUP BY did,formlt
)amk

LEFT JOIN
(
 SELECT i.id AS id,i.`drug_id` AS did ,i.`formulation_id` AS form ,MAX(i.transaction_id) AS trq ,DATE(i.created_on) AS icd,
i.opening_balance AS balc,i.closing_balance AS balll,batch_no AS bat,DATE(i.date_expiry) AS datexp
FROM `inventory_store_drug_transaction_detail` i 
INNER JOIN inventory_store_drug_transaction idt ON i.transaction_id=idt.id 
WHERE DATE(i.date_expiry)>=CURDATE() GROUP BY drug_id,i.`formulation_id`,DATE(i.created_on ))amb  
ON amb.trq=amk.trans GROUP BY trans)ambiks ON 
ambiks.dnd=i.drug_id  AND ambiks.formlt=i.`formulation_id`
INNER JOIN(SELECT id,did,form,balc,trq,NAME,bats FROM
(SELECT MIN(i.transaction_id) AS maxd,i.drug_id AS diid ,i.`formulation_id` AS forms,MIN(i.id) AS ids,id.name,batch_no AS bats
FROM inventory_store_drug_transaction_detail i
INNER JOIN inventory_store_drug_transaction idt ON i.transaction_id=idt.id 
INNER JOIN inventory_drug id ON i.drug_id=id.id
INNER JOIN  inventory_store ist ON ist.id=idt.store_id
WHERE   DATE(idt.created_on)<=?
AND (idt.store_id=2 AND idt.type_transaction=1)
GROUP BY i.drug_id ,i.formulation_id,batch_no ORDER BY i.drug_id ) amb
RIGHT JOIN 
(SELECT SUM(balc) AS balc, id,did,form,trq,bat FROM(SELECT balc ,id,did,form,trq,bat
 FROM( SELECT i.id AS id,i.`drug_id` AS did ,i.`formulation_id` AS form ,i.transaction_id AS trq ,
MIN(i.current_quantity) AS balc,batch_no AS bat,DATE(i.date_expiry) AS datexp
FROM `inventory_store_drug_transaction_detail` i 
INNER JOIN inventory_store_drug_transaction idt ON i.transaction_id=idt.id 
WHERE DATE(i.date_expiry) >=CURDATE() AND (idt.store_id=2 AND idt.type_transaction=1)  GROUP BY drug_id,i.`formulation_id`,batch_no )ambik
GROUP BY did,form,bat)amb GROUP BY did,form)amb1 ON amb.maxd=amb1.trq AND amb.diid=amb1.did AND amb.forms=amb1.form AND
 amb.ids=amb1.id)ph ON i.drug_id=ph.did AND i.`formulation_id`=ph.form
INNER JOIN(SELECT id,did,form,NAME,Rate1,unit_price1,VAT1,company_name,mrp_price1,waiver_percetage1,waiver_amount1,amb.description AS description ,amb.receipt_No AS receipt_No,
cgst1,cgst_amount1,sgst1,sgst_amount1 FROM
(SELECT MIN(i.transaction_id) AS maxd,i.drug_id AS diid ,i.`formulation_id` AS forms,MIN(i.id) AS ids,id.name,idt.description AS description,idt.receipt_No AS receipt_No
FROM inventory_store_drug_transaction_detail i
INNER JOIN inventory_store_drug_transaction idt ON i.transaction_id=idt.id 
INNER JOIN inventory_drug id ON i.drug_id=id.id
INNER JOIN  inventory_store ist ON ist.id=idt.store_id
WHERE   DATE(idt.created_on)<=?
AND (idt.store_id=1 AND idt.type_transaction=1)
GROUP BY i.drug_id ,i.formulation_id ORDER BY i.drug_id ) amb
LEFT JOIN 
(SELECT i.id AS id,i.`drug_id` AS did ,i.`formulation_id` AS form ,i.transaction_id AS trq ,i.current_quantity AS balc,
i.Rate AS Rate1,i.unit_price AS unit_price1,i.VAT AS VAT1,i.company_name,i.mrp_price AS mrp_price1,
i.batch_no AS batch_no1,i.waiver_percetage AS waiver_percetage1 ,i.waiver_amount AS waiver_amount1,i.cgst AS cgst1,
i.cgst_amount AS cgst_amount1,i.sgst AS sgst1,i.sgst_amount AS sgst_amount1
FROM `inventory_store_drug_transaction_detail` i )amb1 ON amb.maxd=amb1.trq AND amb.diid=amb1.did AND amb.forms=amb1.form AND
 amb.ids=amb1.id)ph1  ON i.drug_id=ph1.did AND i.`formulation_id`=ph1.form 
WHERE ist.name LIKE 'Pharmacy'  
AND DATE(i.created_on)<=?
GROUP BY id.name,idf.name,idf.dozage
ORDER BY id.name
)amb
GROUP BY brandname1,form,formulation1,dozage1
)amb3 ON amb1.id=amb3.storeid1
GROUP BY brandname1,form,formulation1,dozage1
)ambik
LEFT JOIN 
(SELECT SUM(issue_quantity) AS isq,id.name AS drugsid,i.drug_id AS did,i.formulation_id AS formsid,idf.name AS fname
 FROM `inventory_store_drug_transaction_detail` i 
INNER JOIN `inventory_store_drug_transaction` idt ON idt.id= i.transaction_id
INNER JOIN inventory_drug id ON i.drug_id=id.id
INNER JOIN inventory_drug_formulation idf ON i.formulation_id=idf.id
 WHERE idt.description LIKE "ISSUE DRUG TO PATIENT%"  AND DATE(i.created_on)=?
 GROUP BY did,formsid  
 )ambr1 ON ambr1.drugsid=ambik.brandname1 AND ambr1.formsid=ambik.form
 GROUP BY brandname1,form,formulation1,dozage1) amba
LEFT JOIN(SELECT issue_quantity AS returnquantity,id.name AS drugsid,i.formulation_id AS formsid,idf.name AS fname
 FROM `inventory_store_drug_transaction_detail` i 
INNER JOIN `inventory_store_drug_transaction` idt ON idt.id= i.transaction_id 
INNER JOIN inventory_drug id ON i.drug_id=id.id
INNER JOIN inventory_drug_formulation idf ON i.formulation_id=idf.id
WHERE idt.description LIKE "ISSUE DRUG TO RETUN%" AND DATE(i.created_on)=?)
ambr ON ambr.drugsid=amba.brandname1 AND ambr.formsid=amba.form
)am 
LEFT JOIN
( SELECT SUM(i.quantity) AS receiptqty,id.name AS drugsid,i.formulation_id AS formsid,idf.name AS fname
 FROM `inventory_store_drug_transaction_detail` i 
INNER JOIN `inventory_store_drug_transaction` idt ON idt.id= i.transaction_id 
INNER JOIN inventory_drug id ON i.drug_id=id.id
INNER JOIN inventory_drug_formulation idf ON i.formulation_id=idf.id
WHERE idt.description LIKE "RECEIPT FROM PATIENT%"  AND DATE(i.created_on)=? GROUP BY drugsid,formsid
)amak ON amak.drugsid=am.brandname1 AND amak.formsid=am.form
)amkk
LEFT JOIN
( SELECT i.quantity AS receiptstore,id.name AS drugsid,i.formulation_id AS formsid,idf.name AS fname,i.opening_balance AS openb
 FROM `inventory_store_drug_transaction_detail` i 
INNER JOIN `inventory_store_drug_transaction` idt ON idt.id= i.transaction_id 
INNER JOIN inventory_drug id ON i.drug_id=id.id
INNER JOIN inventory_drug_formulation idf ON i.formulation_id=idf.id
WHERE idt.description REGEXP '[RECEIPT]' AND DATE(idt.created_on)=? GROUP BY drugsid,formsid
)ambbk ON ambbk.drugsid=amkk.brandname1 AND ambbk.formsid=amkk.form
)mbk
RIGHT JOIN(SELECT id,diid,forms,amb.formname AS formnames,amb1.balc AS expireddrugs,trq,amb.bnames AS bnames,bats,amb.dozage AS dose FROM
(SELECT MAX(i.transaction_id) AS maxd,i.drug_id AS diid ,idf.name AS formname,idf.dozage AS dozage,i.`formulation_id` AS forms,MAX(i.id) AS ids,id.name AS bnames,batch_no AS bats
FROM inventory_store_drug_transaction_detail i
INNER JOIN inventory_store_drug_transaction idt ON i.transaction_id=idt.id 
INNER JOIN inventory_drug id ON i.drug_id=id.id
INNER JOIN inventory_drug_formulation idf ON i.formulation_id=idf.id
INNER JOIN  inventory_store ist ON ist.id=idt.store_id
WHERE   DATE(idt.created_on)<=? 
AND (idt.store_id=2 AND idt.type_transaction=1)
GROUP BY i.drug_id ,i.formulation_id,batch_no ORDER BY i.drug_id ) amb
LEFT JOIN 
( SELECT SUM(balc) AS balc ,id,did,form,trq,bat
 FROM( SELECT i.id AS id,i.`drug_id` AS did ,i.`formulation_id` AS form ,i.transaction_id AS trq ,
MAX(i.current_quantity) AS balc,batch_no AS bat,DATE(i.date_expiry) AS datexp
FROM `inventory_store_drug_transaction_detail` i 
INNER JOIN inventory_store_drug_transaction idt ON i.transaction_id=idt.id 
WHERE DATE(i.date_expiry) =? AND (idt.store_id=2 AND idt.type_transaction=1)  GROUP BY drug_id,i.`formulation_id`,batch_no )ambik
GROUP BY did,form)amb1 ON amb.maxd=amb1.trq AND amb.diid=amb1.did AND amb.forms=amb1.form AND
 amb.ids=amb1.id)ams ON ams.bnames=mbk.brandname1 AND ams.forms=mbk.form
  GROUP BY bnames,forms
  )amk
   GROUP BY brnds1,formultion1,dose
 )ambk
  
)ambkas

]]></xml-property>
            <xml-property name="designerValues"><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<model:DesignValues xmlns:design="http://www.eclipse.org/datatools/connectivity/oda/design" xmlns:model="http://www.eclipse.org/birt/report/model/adapter/odaModel">
  <Version>2.0</Version>
  <DataSetParameters>
    <parameter>
      <design:ParameterDefinition>
        <design:inOutMode>In</design:inOutMode>
        <design:attributes>
          <design:identifier>
            <design:name></design:name>
            <design:position>1</design:position>
          </design:identifier>
          <design:nativeDataTypeCode>-1</design:nativeDataTypeCode>
          <design:precision>0</design:precision>
          <design:scale>0</design:scale>
          <design:nullability>Unknown</design:nullability>
        </design:attributes>
      </design:ParameterDefinition>
    </parameter>
    <parameter>
      <design:ParameterDefinition>
        <design:inOutMode>In</design:inOutMode>
        <design:attributes>
          <design:identifier>
            <design:name></design:name>
            <design:position>2</design:position>
          </design:identifier>
          <design:nativeDataTypeCode>-1</design:nativeDataTypeCode>
          <design:precision>0</design:precision>
          <design:scale>0</design:scale>
          <design:nullability>Unknown</design:nullability>
        </design:attributes>
      </design:ParameterDefinition>
    </parameter>
    <parameter>
      <design:ParameterDefinition>
        <design:inOutMode>In</design:inOutMode>
        <design:attributes>
          <design:identifier>
            <design:name></design:name>
            <design:position>3</design:position>
          </design:identifier>
          <design:nativeDataTypeCode>-1</design:nativeDataTypeCode>
          <design:precision>0</design:precision>
          <design:scale>0</design:scale>
          <design:nullability>Unknown</design:nullability>
        </design:attributes>
      </design:ParameterDefinition>
    </parameter>
    <parameter>
      <design:ParameterDefinition>
        <design:inOutMode>In</design:inOutMode>
        <design:attributes>
          <design:identifier>
            <design:name></design:name>
            <design:position>4</design:position>
          </design:identifier>
          <design:nativeDataTypeCode>-1</design:nativeDataTypeCode>
          <design:precision>0</design:precision>
          <design:scale>0</design:scale>
          <design:nullability>Unknown</design:nullability>
        </design:attributes>
      </design:ParameterDefinition>
    </parameter>
    <parameter>
      <design:ParameterDefinition>
        <design:inOutMode>In</design:inOutMode>
        <design:attributes>
          <design:identifier>
            <design:name></design:name>
            <design:position>5</design:position>
          </design:identifier>
          <design:nativeDataTypeCode>-1</design:nativeDataTypeCode>
          <design:precision>0</design:precision>
          <design:scale>0</design:scale>
          <design:nullability>Unknown</design:nullability>
        </design:attributes>
      </design:ParameterDefinition>
    </parameter>
    <parameter>
      <design:ParameterDefinition>
        <design:inOutMode>In</design:inOutMode>
        <design:attributes>
          <design:identifier>
            <design:name></design:name>
            <design:position>6</design:position>
          </design:identifier>
          <design:nativeDataTypeCode>-1</design:nativeDataTypeCode>
          <design:precision>0</design:precision>
          <design:scale>0</design:scale>
          <design:nullability>Unknown</design:nullability>
        </design:attributes>
      </design:ParameterDefinition>
    </parameter>
    <parameter>
      <design:ParameterDefinition>
        <design:inOutMode>In</design:inOutMode>
        <design:attributes>
          <design:identifier>
            <design:name></design:name>
            <design:position>7</design:position>
          </design:identifier>
          <design:nativeDataTypeCode>-1</design:nativeDataTypeCode>
          <design:precision>0</design:precision>
          <design:scale>0</design:scale>
          <design:nullability>Unknown</design:nullability>
        </design:attributes>
      </design:ParameterDefinition>
    </parameter>
    <parameter>
      <design:ParameterDefinition>
        <design:inOutMode>In</design:inOutMode>
        <design:attributes>
          <design:identifier>
            <design:name></design:name>
            <design:position>8</design:position>
          </design:identifier>
          <design:nativeDataTypeCode>-1</design:nativeDataTypeCode>
          <design:precision>0</design:precision>
          <design:scale>0</design:scale>
          <design:nullability>Unknown</design:nullability>
        </design:attributes>
      </design:ParameterDefinition>
    </parameter>
    <parameter>
      <design:ParameterDefinition>
        <design:inOutMode>In</design:inOutMode>
        <design:attributes>
          <design:identifier>
            <design:name></design:name>
            <design:position>9</design:position>
          </design:identifier>
          <design:nativeDataTypeCode>-1</design:nativeDataTypeCode>
          <design:precision>0</design:precision>
          <design:scale>0</design:scale>
          <design:nullability>Unknown</design:nullability>
        </design:attributes>
      </design:ParameterDefinition>
    </parameter>
    <parameter>
      <design:ParameterDefinition>
        <design:inOutMode>In</design:inOutMode>
        <design:attributes>
          <design:identifier>
            <design:name></design:name>
            <design:position>10</design:position>
          </design:identifier>
          <design:nativeDataTypeCode>-1</design:nativeDataTypeCode>
          <design:precision>0</design:precision>
          <design:scale>0</design:scale>
          <design:nullability>Unknown</design:nullability>
        </design:attributes>
      </design:ParameterDefinition>
    </parameter>
  </DataSetParameters>
  <design:ResultSets derivedMetaData="true">
    <design:resultSetDefinitions>
      <design:resultSetColumns>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>brands</design:name>
              <design:position>1</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>12</design:nativeDataTypeCode>
            <design:precision>255</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Nullable</design:nullability>
            <design:uiHints>
              <design:displayName>brands</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>brands</design:label>
            <design:formattingHints>
              <design:displaySize>255</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>frm</design:name>
              <design:position>2</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>12</design:nativeDataTypeCode>
            <design:precision>511</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Nullable</design:nullability>
            <design:uiHints>
              <design:displayName>frm</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>frm</design:label>
            <design:formattingHints>
              <design:displaySize>511</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>receiptquantity1</design:name>
              <design:position>3</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>3</design:nativeDataTypeCode>
            <design:precision>32</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>NotNullable</design:nullability>
            <design:uiHints>
              <design:displayName>receiptquantity1</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>receiptquantity1</design:label>
            <design:formattingHints>
              <design:displaySize>33</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>receiptquantity</design:name>
              <design:position>4</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>3</design:nativeDataTypeCode>
            <design:precision>32</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>NotNullable</design:nullability>
            <design:uiHints>
              <design:displayName>receiptquantity</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>receiptquantity</design:label>
            <design:formattingHints>
              <design:displaySize>33</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>description</design:name>
              <design:position>5</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>12</design:nativeDataTypeCode>
            <design:precision>500</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Nullable</design:nullability>
            <design:uiHints>
              <design:displayName>description</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>description</design:label>
            <design:formattingHints>
              <design:displaySize>500</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>receipt_No</design:name>
              <design:position>6</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>12</design:nativeDataTypeCode>
            <design:precision>500</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Nullable</design:nullability>
            <design:uiHints>
              <design:displayName>receipt_No</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>receipt_No</design:label>
            <design:formattingHints>
              <design:displaySize>500</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>returnquantity</design:name>
              <design:position>7</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>-5</design:nativeDataTypeCode>
            <design:precision>11</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>NotNullable</design:nullability>
            <design:uiHints>
              <design:displayName>returnquantity</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>returnquantity</design:label>
            <design:formattingHints>
              <design:displaySize>11</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>totalstock</design:name>
              <design:position>8</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>3</design:nativeDataTypeCode>
            <design:precision>34</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>NotNullable</design:nullability>
            <design:uiHints>
              <design:displayName>totalstock</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>totalstock</design:label>
            <design:formattingHints>
              <design:displaySize>35</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>isq</design:name>
              <design:position>9</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>3</design:nativeDataTypeCode>
            <design:precision>32</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Nullable</design:nullability>
            <design:uiHints>
              <design:displayName>isq</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>isq</design:label>
            <design:formattingHints>
              <design:displaySize>33</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>expireddrugs</design:name>
              <design:position>10</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>3</design:nativeDataTypeCode>
            <design:precision>32</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Nullable</design:nullability>
            <design:uiHints>
              <design:displayName>expireddrugs</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>expireddrugs</design:label>
            <design:formattingHints>
              <design:displaySize>33</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>Rates11</design:name>
              <design:position>11</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>8</design:nativeDataTypeCode>
            <design:precision>19</design:precision>
            <design:scale>2</design:scale>
            <design:nullability>Nullable</design:nullability>
            <design:uiHints>
              <design:displayName>Rates11</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>Rates11</design:label>
            <design:formattingHints>
              <design:displaySize>19</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>clsstckqty</design:name>
              <design:position>12</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>3</design:nativeDataTypeCode>
            <design:precision>36</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Nullable</design:nullability>
            <design:uiHints>
              <design:displayName>clsstckqty</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>clsstckqty</design:label>
            <design:formattingHints>
              <design:displaySize>37</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>clsstckval</design:name>
              <design:position>13</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>8</design:nativeDataTypeCode>
            <design:precision>19</design:precision>
            <design:scale>2</design:scale>
            <design:nullability>Nullable</design:nullability>
            <design:uiHints>
              <design:displayName>clsstckval</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>clsstckval</design:label>
            <design:formattingHints>
              <design:displaySize>19</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
      </design:resultSetColumns>
      <design:criteria/>
    </design:resultSetDefinitions>
  </design:ResultSets>
</model:DesignValues>]]></xml-property>
        </oda-data-set>
    </data-sets>
    <page-setup>
        <simple-master-page name="Simple MasterPage" id="2">
            <property name="type">custom</property>
            <property name="height">11in</property>
            <property name="width">14.5in</property>
            <page-footer>
                <text id="3">
                    <property name="contentType">html</property>
                    <text-property name="content"><![CDATA[<value-of>new Date()</value-of>]]></text-property>
                </text>
            </page-footer>
        </simple-master-page>
    </page-setup>
    <body>
        <table id="7">
            <property name="whiteSpace">normal</property>
            <property name="display">inline</property>
            <property name="width">13.854166666666666in</property>
            <property name="dataSet">Data Set</property>
            <list-property name="boundDataColumns">
                <structure>
                    <property name="name">brands</property>
                    <text-property name="displayName">brands</text-property>
                    <expression name="expression" type="javascript">dataSetRow["brands"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">frm</property>
                    <text-property name="displayName">frm</text-property>
                    <expression name="expression" type="javascript">dataSetRow["frm"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">receiptquantity1</property>
                    <text-property name="displayName">receiptquantity1</text-property>
                    <expression name="expression" type="javascript">dataSetRow["receiptquantity1"]</expression>
                    <property name="dataType">decimal</property>
                </structure>
                <structure>
                    <property name="name">receiptquantity</property>
                    <text-property name="displayName">receiptquantity</text-property>
                    <expression name="expression" type="javascript">dataSetRow["receiptquantity"]</expression>
                    <property name="dataType">decimal</property>
                </structure>
                <structure>
                    <property name="name">description</property>
                    <text-property name="displayName">description</text-property>
                    <expression name="expression" type="javascript">dataSetRow["description"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">receipt_No</property>
                    <text-property name="displayName">receipt_No</text-property>
                    <expression name="expression" type="javascript">dataSetRow["receipt_No"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">returnquantity</property>
                    <text-property name="displayName">returnquantity</text-property>
                    <expression name="expression" type="javascript">dataSetRow["returnquantity"]</expression>
                    <property name="dataType">decimal</property>
                </structure>
                <structure>
                    <property name="name">totalstock</property>
                    <text-property name="displayName">totalstock</text-property>
                    <expression name="expression" type="javascript">dataSetRow["totalstock"]</expression>
                    <property name="dataType">decimal</property>
                </structure>
                <structure>
                    <property name="name">isq</property>
                    <text-property name="displayName">isq</text-property>
                    <expression name="expression" type="javascript">dataSetRow["isq"]</expression>
                    <property name="dataType">decimal</property>
                </structure>
                <structure>
                    <property name="name">expireddrugs</property>
                    <text-property name="displayName">expireddrugs</text-property>
                    <expression name="expression" type="javascript">dataSetRow["expireddrugs"]</expression>
                    <property name="dataType">decimal</property>
                </structure>
                <structure>
                    <property name="name">Rates11</property>
                    <text-property name="displayName">Rates11</text-property>
                    <expression name="expression" type="javascript">dataSetRow["Rates11"]</expression>
                    <property name="dataType">float</property>
                </structure>
                <structure>
                    <property name="name">clsstckqty</property>
                    <text-property name="displayName">clsstckqty</text-property>
                    <expression name="expression" type="javascript">dataSetRow["clsstckqty"]</expression>
                    <property name="dataType">decimal</property>
                </structure>
                <structure>
                    <property name="name">clsstckval</property>
                    <text-property name="displayName">clsstckval</text-property>
                    <expression name="expression" type="javascript">dataSetRow["clsstckval"]</expression>
                    <property name="dataType">float</property>
                </structure>
                <structure>
                    <property name="name">Aggregation</property>
                    <property name="dataType">integer</property>
                    <property name="aggregateFunction">RUNNINGCOUNT</property>
                    <list-property name="arguments">
                        <structure>
                            <property name="name">Expression</property>
                        </structure>
                    </list-property>
                    <property name="allowExport">true</property>
                </structure>
            </list-property>
            <column id="53">
                <property name="width">0.4166666666666667in</property>
            </column>
            <column id="54">
                <property name="width">1.3020833333333333in</property>
            </column>
            <column id="55">
                <property name="width">1.1041666666666667in</property>
            </column>
            <column id="56">
                <property name="width">0.9791666666666666in</property>
            </column>
            <column id="57">
                <property name="width">0.7395833333333334in</property>
            </column>
            <column id="58">
                <property name="width">1.59375in</property>
            </column>
            <column id="59">
                <property name="width">1.0416666666666667in</property>
            </column>
            <column id="60">
                <property name="width">0.8854166666666666in</property>
            </column>
            <column id="61">
                <property name="width">0.8020833333333334in</property>
            </column>
            <column id="62">
                <property name="width">0.90625in</property>
            </column>
            <column id="63">
                <property name="width">1.0416666666666667in</property>
            </column>
            <column id="64">
                <property name="width">1in</property>
            </column>
            <column id="65">
                <property name="width">0.96875in</property>
            </column>
            <column id="66">
                <property name="width">1.0729166666666667in</property>
            </column>
            <header>
                <row id="67">
                    <property name="backgroundColor">#C0C0C0</property>
                    <property name="fontWeight">bold</property>
                    <property name="borderBottomStyle">solid</property>
                    <property name="borderBottomWidth">thin</property>
                    <property name="borderLeftStyle">solid</property>
                    <property name="borderLeftWidth">thin</property>
                    <property name="borderRightStyle">solid</property>
                    <property name="borderRightWidth">thin</property>
                    <property name="borderTopStyle">solid</property>
                    <property name="borderTopWidth">thin</property>
                    <property name="height">0.375in</property>
                    <cell id="68">
                        <property name="colSpan">14</property>
                        <property name="rowSpan">1</property>
                        <property name="borderBottomStyle">solid</property>
                        <property name="borderBottomWidth">thin</property>
                        <property name="borderLeftStyle">solid</property>
                        <property name="borderLeftWidth">thin</property>
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="borderTopStyle">solid</property>
                        <property name="borderTopWidth">thin</property>
                        <label id="97">
                            <text-property name="text">Drug Analysis Report</text-property>
                        </label>
                    </cell>
                </row>
                <row id="82">
                    <property name="backgroundColor">#C0C0C0</property>
                    <property name="fontWeight">bold</property>
                    <property name="borderBottomStyle">solid</property>
                    <property name="borderBottomWidth">thin</property>
                    <property name="borderLeftStyle">solid</property>
                    <property name="borderLeftWidth">thin</property>
                    <property name="borderRightStyle">solid</property>
                    <property name="borderRightWidth">thin</property>
                    <property name="borderTopStyle">solid</property>
                    <property name="borderTopWidth">thin</property>
                    <property name="height">0.71875in</property>
                    <cell id="83">
                        <property name="borderBottomStyle">solid</property>
                        <property name="borderBottomWidth">thin</property>
                        <property name="borderLeftStyle">solid</property>
                        <property name="borderLeftWidth">thin</property>
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="borderTopStyle">solid</property>
                        <property name="borderTopWidth">thin</property>
                        <label id="98">
                            <text-property name="text">Sr No.</text-property>
                        </label>
                    </cell>
                    <cell id="84">
                        <property name="borderBottomStyle">solid</property>
                        <property name="borderBottomWidth">thin</property>
                        <property name="borderLeftStyle">solid</property>
                        <property name="borderLeftWidth">thin</property>
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="borderTopStyle">solid</property>
                        <property name="borderTopWidth">thin</property>
                        <label id="99">
                            <text-property name="text">Item Name</text-property>
                        </label>
                    </cell>
                    <cell id="85">
                        <property name="borderBottomStyle">solid</property>
                        <property name="borderBottomWidth">thin</property>
                        <property name="borderLeftStyle">solid</property>
                        <property name="borderLeftWidth">thin</property>
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="borderTopStyle">solid</property>
                        <property name="borderTopWidth">thin</property>
                        <label id="100">
                            <text-property name="text">Formulation</text-property>
                        </label>
                    </cell>
                    <cell id="86">
                        <property name="borderBottomStyle">solid</property>
                        <property name="borderBottomWidth">thin</property>
                        <property name="borderLeftStyle">solid</property>
                        <property name="borderLeftWidth">thin</property>
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="borderTopStyle">solid</property>
                        <property name="borderTopWidth">thin</property>
                        <label id="101">
                            <text-property name="text">Opening Stock </text-property>
                        </label>
                    </cell>
                    <cell id="87">
                        <property name="borderBottomStyle">solid</property>
                        <property name="borderBottomWidth">thin</property>
                        <property name="borderLeftStyle">solid</property>
                        <property name="borderLeftWidth">thin</property>
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="borderTopStyle">solid</property>
                        <property name="borderTopWidth">thin</property>
                        <label id="102">
                            <text-property name="text">Receipt Qty</text-property>
                        </label>
                    </cell>
                    <cell id="88">
                        <property name="borderBottomStyle">solid</property>
                        <property name="borderBottomWidth">thin</property>
                        <property name="borderLeftStyle">solid</property>
                        <property name="borderLeftWidth">thin</property>
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="borderTopStyle">solid</property>
                        <property name="borderTopWidth">thin</property>
                        <label id="103">
                            <text-property name="text">Vender Name </text-property>
                        </label>
                    </cell>
                    <cell id="89">
                        <property name="borderBottomStyle">solid</property>
                        <property name="borderBottomWidth">thin</property>
                        <property name="borderLeftStyle">solid</property>
                        <property name="borderLeftWidth">thin</property>
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="borderTopStyle">solid</property>
                        <property name="borderTopWidth">thin</property>
                        <label id="104">
                            <text-property name="text">Bill Number/Receipt ID</text-property>
                        </label>
                    </cell>
                    <cell id="90">
                        <property name="borderBottomStyle">solid</property>
                        <property name="borderBottomWidth">thin</property>
                        <property name="borderLeftStyle">solid</property>
                        <property name="borderLeftWidth">thin</property>
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="borderTopStyle">solid</property>
                        <property name="borderTopWidth">thin</property>
                        <label id="105">
                            <text-property name="text">Purchase Return</text-property>
                        </label>
                    </cell>
                    <cell id="91">
                        <property name="borderBottomStyle">solid</property>
                        <property name="borderBottomWidth">thin</property>
                        <property name="borderLeftStyle">solid</property>
                        <property name="borderLeftWidth">thin</property>
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="borderTopStyle">solid</property>
                        <property name="borderTopWidth">thin</property>
                        <label id="106">
                            <text-property name="text">Total Stock</text-property>
                        </label>
                    </cell>
                    <cell id="92">
                        <property name="borderBottomStyle">solid</property>
                        <property name="borderBottomWidth">thin</property>
                        <property name="borderLeftStyle">solid</property>
                        <property name="borderLeftWidth">thin</property>
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="borderTopStyle">solid</property>
                        <property name="borderTopWidth">thin</property>
                        <label id="107">
                            <text-property name="text">Sales Qty(Issue Drugs)</text-property>
                        </label>
                    </cell>
                    <cell id="93">
                        <property name="borderBottomStyle">solid</property>
                        <property name="borderBottomWidth">thin</property>
                        <property name="borderLeftStyle">solid</property>
                        <property name="borderLeftWidth">thin</property>
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="borderTopStyle">solid</property>
                        <property name="borderTopWidth">thin</property>
                        <label id="108">
                            <text-property name="text">Expired Drugs</text-property>
                        </label>
                    </cell>
                    <cell id="94">
                        <property name="borderBottomStyle">solid</property>
                        <property name="borderBottomWidth">thin</property>
                        <property name="borderLeftStyle">solid</property>
                        <property name="borderLeftWidth">thin</property>
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="borderTopStyle">solid</property>
                        <property name="borderTopWidth">thin</property>
                        <label id="109">
                            <text-property name="text">Rate&#13;
(Rate+GST)</text-property>
                        </label>
                    </cell>
                    <cell id="95">
                        <property name="borderBottomStyle">solid</property>
                        <property name="borderBottomWidth">thin</property>
                        <property name="borderLeftStyle">solid</property>
                        <property name="borderLeftWidth">thin</property>
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="borderTopStyle">solid</property>
                        <property name="borderTopWidth">thin</property>
                        <label id="110">
                            <text-property name="text">Closing Stock Qty</text-property>
                        </label>
                    </cell>
                    <cell id="96">
                        <property name="borderBottomStyle">solid</property>
                        <property name="borderBottomWidth">thin</property>
                        <property name="borderLeftStyle">solid</property>
                        <property name="borderLeftWidth">thin</property>
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="borderTopStyle">solid</property>
                        <property name="borderTopWidth">thin</property>
                        <label id="111">
                            <text-property name="text">Closing Stock Value</text-property>
                        </label>
                    </cell>
                </row>
            </header>
            <detail>
                <row id="23">
                    <property name="borderBottomStyle">solid</property>
                    <property name="borderBottomWidth">thin</property>
                    <property name="borderLeftStyle">solid</property>
                    <property name="borderLeftWidth">thin</property>
                    <property name="borderRightStyle">solid</property>
                    <property name="borderRightWidth">thin</property>
                    <property name="borderTopStyle">solid</property>
                    <property name="borderTopWidth">thin</property>
                    <property name="height">0.3229166666666667in</property>
                    <cell id="24">
                        <property name="borderBottomStyle">solid</property>
                        <property name="borderBottomWidth">thin</property>
                        <property name="borderLeftStyle">solid</property>
                        <property name="borderLeftWidth">thin</property>
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="borderTopStyle">solid</property>
                        <property name="borderTopWidth">thin</property>
                        <data id="128">
                            <property name="resultSetColumn">Aggregation</property>
                        </data>
                    </cell>
                    <cell id="25">
                        <property name="borderBottomStyle">solid</property>
                        <property name="borderBottomWidth">thin</property>
                        <property name="borderLeftStyle">solid</property>
                        <property name="borderLeftWidth">thin</property>
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="borderTopStyle">solid</property>
                        <property name="borderTopWidth">thin</property>
                        <data id="115">
                            <property name="resultSetColumn">brands</property>
                        </data>
                    </cell>
                    <cell id="26">
                        <property name="borderBottomStyle">solid</property>
                        <property name="borderBottomWidth">thin</property>
                        <property name="borderLeftStyle">solid</property>
                        <property name="borderLeftWidth">thin</property>
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="borderTopStyle">solid</property>
                        <property name="borderTopWidth">thin</property>
                        <data id="116">
                            <property name="resultSetColumn">frm</property>
                        </data>
                    </cell>
                    <cell id="27">
                        <property name="borderBottomStyle">solid</property>
                        <property name="borderBottomWidth">thin</property>
                        <property name="borderLeftStyle">solid</property>
                        <property name="borderLeftWidth">thin</property>
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="borderTopStyle">solid</property>
                        <property name="borderTopWidth">thin</property>
                        <data id="117">
                            <property name="resultSetColumn">receiptquantity1</property>
                        </data>
                    </cell>
                    <cell id="28">
                        <property name="borderBottomStyle">solid</property>
                        <property name="borderBottomWidth">thin</property>
                        <property name="borderLeftStyle">solid</property>
                        <property name="borderLeftWidth">thin</property>
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="borderTopStyle">solid</property>
                        <property name="borderTopWidth">thin</property>
                        <data id="118">
                            <property name="resultSetColumn">receiptquantity</property>
                        </data>
                    </cell>
                    <cell id="29">
                        <property name="borderBottomStyle">solid</property>
                        <property name="borderBottomWidth">thin</property>
                        <property name="borderLeftStyle">solid</property>
                        <property name="borderLeftWidth">thin</property>
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="borderTopStyle">solid</property>
                        <property name="borderTopWidth">thin</property>
                        <data id="119">
                            <property name="resultSetColumn">description</property>
                        </data>
                    </cell>
                    <cell id="30">
                        <property name="borderBottomStyle">solid</property>
                        <property name="borderBottomWidth">thin</property>
                        <property name="borderLeftStyle">solid</property>
                        <property name="borderLeftWidth">thin</property>
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="borderTopStyle">solid</property>
                        <property name="borderTopWidth">thin</property>
                        <data id="120">
                            <property name="resultSetColumn">receipt_No</property>
                        </data>
                    </cell>
                    <cell id="31">
                        <property name="borderBottomStyle">solid</property>
                        <property name="borderBottomWidth">thin</property>
                        <property name="borderLeftStyle">solid</property>
                        <property name="borderLeftWidth">thin</property>
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="borderTopStyle">solid</property>
                        <property name="borderTopWidth">thin</property>
                        <data id="121">
                            <property name="resultSetColumn">returnquantity</property>
                        </data>
                    </cell>
                    <cell id="32">
                        <property name="borderBottomStyle">solid</property>
                        <property name="borderBottomWidth">thin</property>
                        <property name="borderLeftStyle">solid</property>
                        <property name="borderLeftWidth">thin</property>
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="borderTopStyle">solid</property>
                        <property name="borderTopWidth">thin</property>
                        <data id="122">
                            <property name="resultSetColumn">totalstock</property>
                        </data>
                    </cell>
                    <cell id="33">
                        <property name="borderBottomStyle">solid</property>
                        <property name="borderBottomWidth">thin</property>
                        <property name="borderLeftStyle">solid</property>
                        <property name="borderLeftWidth">thin</property>
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="borderTopStyle">solid</property>
                        <property name="borderTopWidth">thin</property>
                        <data id="123">
                            <property name="resultSetColumn">isq</property>
                        </data>
                    </cell>
                    <cell id="34">
                        <property name="borderBottomStyle">solid</property>
                        <property name="borderBottomWidth">thin</property>
                        <property name="borderLeftStyle">solid</property>
                        <property name="borderLeftWidth">thin</property>
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="borderTopStyle">solid</property>
                        <property name="borderTopWidth">thin</property>
                        <data id="124">
                            <property name="resultSetColumn">expireddrugs</property>
                        </data>
                    </cell>
                    <cell id="35">
                        <property name="borderBottomStyle">solid</property>
                        <property name="borderBottomWidth">thin</property>
                        <property name="borderLeftStyle">solid</property>
                        <property name="borderLeftWidth">thin</property>
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="borderTopStyle">solid</property>
                        <property name="borderTopWidth">thin</property>
                        <data id="125">
                            <property name="resultSetColumn">Rates11</property>
                        </data>
                    </cell>
                    <cell id="36">
                        <property name="borderBottomStyle">solid</property>
                        <property name="borderBottomWidth">thin</property>
                        <property name="borderLeftStyle">solid</property>
                        <property name="borderLeftWidth">thin</property>
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="borderTopStyle">solid</property>
                        <property name="borderTopWidth">thin</property>
                        <data id="126">
                            <property name="resultSetColumn">clsstckqty</property>
                        </data>
                    </cell>
                    <cell id="37">
                        <property name="borderBottomStyle">solid</property>
                        <property name="borderBottomWidth">thin</property>
                        <property name="borderLeftStyle">solid</property>
                        <property name="borderLeftWidth">thin</property>
                        <property name="borderRightStyle">solid</property>
                        <property name="borderRightWidth">thin</property>
                        <property name="borderTopStyle">solid</property>
                        <property name="borderTopWidth">thin</property>
                        <data id="127">
                            <property name="resultSetColumn">clsstckval</property>
                        </data>
                    </cell>
                </row>
            </detail>
        </table>
    </body>
</report>
