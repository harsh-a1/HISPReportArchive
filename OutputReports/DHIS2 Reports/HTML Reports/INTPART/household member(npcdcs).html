<!DOCTYPE html>
<html>
<head>
<style>
td {
	border: 1px solid black;
     padding: 1px;
    text-align: center;
	 
}
#table1 {
    table-layout: auto;
	border-collapse: collapse;
	 border:none;
}
.emptyRow td {
	border:none;
}
.less{
    margin:0;
    padding:0;
}

</style>
</head>
<body>

<table id="table1" class="reporttable"   style="width:100%">
  
 <!--

	<tr style='border:1px solid black;background-color:#fff2cc'>
    <td >
	S.No
	</td>
	<td>
	Individual Name
	</td>
	<td>
	Aadhaar ID
	</td>
	<td>
	Individual Health ID
	</td>
	<td>
	Sex
	</td>
	<td>
	Date of Birth
	</td>
	<td>
	Age
	</td>
	<td>
	Marital Status
	</td>
	<td>
	Beneficiary of any
health insurance
scheme
	</td>
	<td>
	Current Status of
residence
	</td>
	
  </tr>
  -->
    </table>
   <script type="text/javascript" async>
      $.ajaxSetup({
        async: false
    });
	
	     var count=1;
	    var namee=[];
		var adharnumber=[];
		var familyuniqueid=[];
		var sex=[];
		var dateofbirth=[];
		var maritalstatus=[];
		var housenumber;
		var objhouse=[];
		var drinkingwater=[];
		var avaliabletoilet=[];
		var fuelcooking=[];
		var avaliableelectricity=[];
		var typeofhouse=[];
		var motorvehicle=[];
		var objtrack1=[];
		var housedetailss=["xalnzkNfD77","nHR1zCU0maL","Dnm1mq6iq2d","PbEhJPnon0o","kelN057pfhq","zLsKdtlBCIx"];
		var objatt=[];
		var objattribute=[];
		var basichouse=["ZQMF7taSAw8","p6cLzDqCy0c","Q3FM5tnqXwm","caLxHmzEsxO","gfdru4cqZS0","LQi7veXJQ5D","gu2sb8mD9sR"];
		
		 
		  $.get("../api/trackedEntityInstances.json?ou=lZtSBQjZCaX&program=BgTTdBNKHwc&&programStartDate=2017-06-01&programEndDate=2017-06-15&skipPaging=true", function (data1) {
			  var trackdata=data1;
			 
			  			  for(var i=0;i<trackdata.trackedEntityInstances.length;i++)
				{
			  var attributepath=trackdata.trackedEntityInstances[i].attributes; 
			  for(var q=0;q<attributepath.length;q++)
                    {
					 var idd =attributepath[q].attribute;
					 objattribute.push(idd);
				  
				if(attributepath[q].attribute=="ZQMF7taSAw8")//house number
				  {
				var aa=attributepath[q].value;
				
				housenumber=aa;
				objhouse.push(aa);
				//houseenumber(housenumber);
				 
				 }
				else if(attributepath[q].attribute=="p6cLzDqCy0c")//source of drinking water
				  {
				var aa=attributepath[q].value;
				
				drinkingwater.push(aa);
			
				 
				 }
				else if(attributepath[q].attribute=="Q3FM5tnqXwm")//avalability of toilet  
				  {
				var aa=attributepath[q].value;
				
				avaliabletoilet.push(aa);
				
				 
				 }
				 else if(attributepath[q].attribute=="gu2sb8mD9sR")//Motorised vehicle
				  {
				var aa=attributepath[q].value;
				
				motorvehicle.push(aa);
				
				 
				 }
				else if(attributepath[q].attribute=="caLxHmzEsxO")//type of fuel used for cooking
				  {
				var aa=attributepath[q].value;
				
				fuelcooking.push(aa);
				
				 
				 }
			else if(attributepath[q].attribute=="gfdru4cqZS0")//avalibilty of electricty
				  {
				var aa=attributepath[q].value;
				
				avaliableelectricity.push(aa);
				
				 
				 }
				else if(attributepath[q].attribute=="LQi7veXJQ5D")//type of house
				  {
				var aa=attributepath[q].value;
				
				typeofhouse.push(aa);
				
				 
				 }
				
				  }
				   
				    var array3 = basichouse.filter(function(obj) { return objattribute.indexOf(obj) == -1; });
		          for(var t=0;t<array3.length;t++)
					{
					if(array3[t]=="ZQMF7taSAw8")
				      objhouse.push("NA");
					else if(array3[t]=="p6cLzDqCy0c")
					drinkingwater.push("NA");
					else if(array3[t]=="caLxHmzEsxO")
					fuelcooking.push("NA");
					else if(array3[t]=="gfdru4cqZS0")
					avaliableelectricity.push("NA");
					else if(array3[t]=="LQi7veXJQ5D")
					typeofhouse.push("NA");
					else if(array3[t]=="Q3FM5tnqXwm")
					avaliabletoilet.push("NA");
					else if(array3[t]=="gu2sb8mD9sR")
					motorvehicle.push("NA");
					
					}
					
				 		objattribute=[];
				   
				   
				   
				   
				   }
			    }); 
				
		// mapping of the house number
		 for(g=0;g<objhouse.length;g++)
			  {
		$.get("../api/trackedEntityInstances.json?ou=lZtSBQjZCaX&program=TcaMMqHJxK5&programStartDate=2017-06-01&programEndDate=2017-06-15&skipPaging=true", function (data1) {
			  var trackdata=data1;
			 
			  			  for(var i=0;i<trackdata.trackedEntityInstances.length;i++)
				{
			  var attributepath=trackdata.trackedEntityInstances[i].attributes; 
			  for(var q=0;q<attributepath.length;q++)
                    {
					 
				  
				if(attributepath[q].displayName=="Household")
				  {
				var aa=attributepath[q].value;
				
				
				 if(objhouse[g]==aa)
				 {
				 var track1= trackdata.trackedEntityInstances[i].trackedEntityInstance;
				   
				   objtrack1.push(track1);
				 
				    }
				 }
				  
				   
				   }
				   }
				   
				   
			    }); 
		
		
		// getting family memeber accordinf to house number

		  for(x=0;x<objtrack1.length;x++)
		  {
	   var url1=  "../api/trackedEntityInstances/"+objtrack1[x]+".json?";
         $.get(url1, function (data1) {
			 
			var trackdata=data1;
               // console.log(trackdata);
					
				
				 for(var q=0;q<trackdata.attributes.length;q++)
                    {
					var idd =trackdata.attributes[q].attribute;
					 objatt.push(idd);
				if(trackdata.attributes[q].attribute=="xalnzkNfD77")//name of family member
				{
				 
				var aa=trackdata.attributes[q].value;
				 namee.push(aa);
				
				}
				if(trackdata.attributes[q].attribute=="nHR1zCU0maL")  //adhar number
				{
				
				var aa=trackdata.attributes[q].value;
				adharnumber.push(aa);
				
				}
				if(trackdata.attributes[q].attribute=="Dnm1mq6iq2d")//family unique id
				{
				
				var aa=trackdata.attributes[q].value;
				familyuniqueid.push(aa);
				
				}
				if(trackdata.attributes[q].attribute=="PbEhJPnon0o")//sex
				{
				
				var aa=trackdata.attributes[q].value;
				sex.push(aa);
				
				}
				if(trackdata.attributes[q].attribute=="kelN057pfhq")//date of birth
				{
				
				var aa=trackdata.attributes[q].value;
			         dateofbirth.push(aa);
				
				}
				if(trackdata.attributes[q].attribute=="zLsKdtlBCIx")//marital status
				{
				
				var aa=trackdata.attributes[q].value;
				maritalstatus.push(aa);
				
				}
				
			
					 

				 }
				 
				  var array3 = housedetailss.filter(function(obj) { return objatt.indexOf(obj) == -1; });
		          for(var t=0;t<array3.length;t++)
					{
					if(array3[t]=="xalnzkNfD77")
				      namee.push("NA");
					else if(array3[t]=="nHR1zCU0maL")
					adharnumber.push("NA");
					else if(array3[t]=="Dnm1mq6iq2d")
					familyuniqueid.push("NA");
					else if(array3[t]=="PbEhJPnon0o")
					sex.push("NA");
					else if(array3[t]=="kelN057pfhq")
					dateofbirth.push("NA");
					else if(array3[t]=="zLsKdtlBCIx")
					maritalstatus.push("NA");
					
					}
					
				 		objatt=[];
				   
				  });
				  }
				
	
				 var houdetail="<tr style='border:1px solid black;background-color:#F5F5F5;'> <td colspan='5' height='30px'><b>1. Household details –</b><td colspan='5'></td></td></tr>";
                  var hounumber="<tr style='border:1px solid black;background-color:#F5F5F5;'>	<td colspan='5'> i. Number/ID</td>	<td style='background-color:white;' colspan='5'>"+objhouse[g]+"</td></tr>";				
                    var namehead="<tr style='border:1px solid black;background-color:#F5F5F5;'>	<td colspan='5'>ii. Name of Head of the Household</td>	<td style='background-color:white;' colspan='5'>&nbsp&nbsp&nbsp&nbsp&nbsp </td>	</tr>";
                     var houamenties="<tr style='border:1px solid black;background-color:#F5F5F5;'>	<td colspan='5'>iii. Details of household amenities –</td>	<td style='background-color:white;' colspan='5'>&nbsp&nbsp&nbsp&nbsp&nbsp </td>	</tr>";
                       var tyhouse="<tr style='border:1px solid black;background-color:#F5F5F5;'>	<td colspan='5'>a) Type of house</td>	<td style='background-color:white;' colspan='5'>"+typeofhouse[g]+"</td>	</tr>";
                      var avaliatoilet="<tr style='border:1px solid black;background-color:#F5F5F5;'>	<td colspan='5'>b) Availability of toilet</td>	<td style='background-color:white;' colspan='5'>"+avaliabletoilet[g]+" </td></tr>";
				   var drinwater="<tr style='border:1px solid black;background-color:#F5F5F5;'>	<td colspan='5'>c) Source of drinking water</td>	<td style='background-color:white;' colspan='5'>"+drinkingwater[g]+" </td>	</tr>";
				var avaelectricity="<tr style='border:1px solid black;background-color:#F5F5F5;'>	<td colspan='5'>d) Availability of electricity</td>	<td style='background-color:white;' colspan='5'>"+avaliableelectricity[g]+"</td></tr>";
				var motorveh="<tr style='border:1px solid black;background-color:#F5F5F5;'>	<td colspan='5'>e) Motorised vehicle</td>	<td style='background-color:white;' colspan='5'>"+motorvehicle[g]+"</td></tr>";
				var tyfuel="<tr style='border:1px solid black;background-color:#F5F5F5;'>	<td colspan='5'>f) Type of fuel used for cooking</td>	<td style='background-color:white;' colspan='5'>"+fuelcooking[g]+"</td>	</tr>";
				var contacttt="<tr style='border:1px solid black;background-color:#F5F5F5;'>	<td colspan='5'>g) Contact details –Head of the Household</td>	<td style='background-color:white;' colspan='5'>&nbsp&nbsp&nbsp&nbsp&nbsp </td>	</tr>";
				var empt = "<tr class='emptyRow'><td colspan='10' height='40px'></td><tr>";
			var em = "<tr class='emptyRow'><td colspan='10' height='40px'></td><tr>";
			var tabl2="<tr style='border:1px solid black;background-color:#fff2cc'>    <td >	S.No		<td>	Individual Name		<td>	Aadhaar ID	</td>	<td>	Individual Health ID	</td><td>	Sex</td><td>Date of Birth</td><td>Age</td><td>Marital Status</td><td>Beneficiary of anyhealth insurancescheme</td><td>Current Status ofresidence</td>	<tr>";
					
					
					
              $(".reporttable").append(houdetail);
			$(".reporttable").append(hounumber);
			 $(".reporttable").append(namehead);
			$(".reporttable").append(houamenties);
			$(".reporttable").append(tyhouse);
			  $(".reporttable").append(avaliatoilet);
			  $(".reporttable").append(drinwater);
			 $(".reporttable").append(avaelectricity);
			  $(".reporttable").append(motorveh);
			  $(".reporttable").append(tyfuel);
			   $(".reporttable").append(contacttt);
						
			// $(".reporttable").append(empt);
				//$(".reporttable").append(em);
				 $(".reporttable").append(tabl2);
				 
				 for(p=0;p<objtrack1.length;p++)
					{
			var group ="<tr style='border:1px solid black;background-color:white;height:30px'><td style= 'text-align:center' >"+count+"</td> <td style= 'text-align:center'>" +namee[p]+ "</td><td style= 'text-align:center'  >" +adharnumber[p] + "</td> <td style= 'text-align:center' >"+familyuniqueid[p]+" </td> <td style= 'text-align:center'>" +sex[p]+ "</td> <td style= 'text-align:center'>"+dateofbirth[p]+"</td> <td style= 'text-align:center'>Age</td> <td style= 'text-align:center' >"+maritalstatus[p]+"</td> <td style= 'text-align:center'  >benificary</td> <td style= 'text-align:center' >currentstatus</td>  </tr>";
             
				 
			    $(".reporttable").append(group);
				count++;
				}
				 $(".reporttable").append(empt);
				$(".reporttable").append(em);
				 
				
			
			objtrack1=[]; 
			namee=[];
			adharnumber=[];
			familyuniqueid=[];
			count=1;
			sex=[];
			maritalstatus=[];
			dateofbirth=[];
			} 
				
			
			 
	
	
   </script>
  

  </body>
  </html>