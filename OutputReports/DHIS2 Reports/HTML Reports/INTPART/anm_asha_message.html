<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<style>
td {
	border: 1px solid black;
     padding: 1px;
    text-align: center;
	 
}
#table1 {
    table-layout: auto;
	border-collapse: collapse;
	 border:none;
}
.emptyRow td {
	border:none;
}
.less{
    margin:0;
    padding:0;
}
.emptyRow td {
	border:none;
}
textarea {    
    position: absolute;
    left: 30px;
}
</style>
</head>
<body>

           
 <button type="button"  id="myBtn" class="btn btn-info"  style='margin-left:25px;'  onclick="dm('anm');">ANM</button>        
  <button type="button"  id="myBtn" class="btn btn-info"   style='margin-left:25px;' onclick="dm('asha');">ASHA</button>   
    <button type="button"  id="myBtn" class="btn btn-info"  style='margin-left:25px;'  onclick="dm('AWW');">AWW</button>

</br>
</br>

<textarea id="test" rows="6" placeholder='Type the Sms content' cols="55">

</textarea>
</br>
</br>
</br>
</br>
</br>
</br>    

</br>
</br>
</br>
</br>
<a href="http://www.hindietools.com/2016/05/html-entity-to-unicode-unicode-to-html.html">CONVERT TO HTML ATTRIBUTE</a>
</br>
</br>
<input type='button' id='btn' value='Send Sms'/>
<table id="table1" class="report"   style="width:100%">
  
 
    </table>
	<script>
	
	</script>
	
   <script type="text/javascript" async>
   var smscontent;
   //var  mobileee=["8968999927","NA","9650597410","NA"];
     	 $.ajaxSetup({
        async: false
    });
	 var unicodeString = '';
	 	var mobile=[];
	 var homeworker_number=[];
	 
	    function dm(dmm){
		homeworker_number=[];
		var show_case=dmm;
		//alert(dmabc);
	   var Table = document.getElementById("table1");
        Table.innerHTML = "";
		mobile=[];
	     var count=1;
	    var namee=[];
		var objid=[];
	
		var adharnumber=[];
		
		var familyuniqueid=[];
		var objtrackinstance=[];
		var housenumber;
		var objhouse=[];
		var objcheck=[];
		var sex=[];
		var objtrack1=[];
		var objdiagnosis=[];
		var housedetailss=["xalnzkNfD77","nHR1zCU0maL","Dnm1mq6iq2d","PbEhJPnon0o","kelN057pfhq","zLsKdtlBCIx","Lt9ZrfgAMuw"];
		var objatt=[];
		var objattribute=[];
		var basichouse=["ZQMF7taSAw8","p6cLzDqCy0c","Q3FM5tnqXwm","caLxHmzEsxO","gfdru4cqZS0","LQi7veXJQ5D","gu2sb8mD9sR"];
		 
		   
		 if(show_case=="anm"){
				 
				 
				namee.push("Khushwant Kaur    (ANM)","Kanawaljit Kaur    (ANM)","Kamaljeet Kaur    (ANM)","Arti Devi    (ANM)","Sunita    (ANM)","rohit");
				mobile.push("9876561184","9646001776","8194890402","XXXXXXXXXX","7986731541","7015054469");
					 
				   }
				     
				   else if(show_case=="asha"){
				   
				  
				namee.push("Manka Birla    (ASHA)","Sunita    (ASHA)","Sushma    (ASHA)","Kusumlata Sharma    (ASHA)","dilroop");
				mobile.push("8284087139","7837089468","8968654548","9417374827","8968999927");
				}
				   
				   
				   
                        else if(show_case=="AWW"){				  
				 		 
				namee.push("Kulwinder Kaur    (AWW)","Paramjit    (AWW)","Charanjeet    (AWW)","Amanpreet    (AWW)","Parvati    (AWW)","Baby    (AWW)","Paramjeet    (AWW)","Sarbjeet    (AWW)","Salochana    (AWW)","Savita    (AWW)","Sheela    (AWW)","Vandana    (AWW)","Sangeeta    (AWW)","Susheela    (AWW)","Shiksha    (AWW)");
				mobile.push("9592076052","7837574453","9988048171","7508525858","9041249275","9815537224","9888680289","8968016044","9915985992","7508165543","7837455342","7837088142","9988129699","9388188099","9256933113");
				}
				var smsbutton="<tr class='emptyRow' style='height:20px'><td></td><td></td><td></td></tr>";
		        
               var aadress="<tr style='border:1px solid black;background-color:orange;height:30px'><td>S.No</td><td> Name</td><td>Phone Number</td><td>select</td></tr>";
		        
				  $(".report").append(smsbutton);
				 $(".report").append(aadress);
		 
		     for(var i=0;i<namee.length;i++){
			 
			  var resulttt="<tr style='border:1px solid black;background-color:white;height:30px'><td>"+i+"</td><td> "+namee[i]+"</td><td>"+mobile[i]+"</td><td><input type='checkbox' class='btn' value='Show Details' onclick='detailsss(mobile);'/></td></tr>";
		        
				  $(".report").append(resulttt);
			 
			 
			 
			 }
		 
		 
		 
	
		
		
		// getting family memeber according to diagnosis
		
				 document.getElementById("btn").addEventListener("click", function() {
				 responsemessage(homeworker_number);
    sendsmss(homeworker_number);
	event.stopImmediatePropagation();
}, false);

	}	 
	
	function responsemessage(homeworker_number){
	
	var loop_homeworker_number=homeworker_number;
	for(var i=0;i<loop_homeworker_number.length;i++){
	
	 alert("Message has been sent to"+loop_homeworker_number[i]);
	
	}
	
	
	}
	function sendsmss(homeworker_number){

	 smscontent= document.getElementById('test').value;
 var finalcontent = encodeURIComponent(smscontent);

var smsurl = "http://msdgweb.mgov.gov.in/esms/sendsmsrequest?username=PHD25PGIMER&password=sph@25&smsservicetype=unicodemsg&content="+finalcontent+"&mobileno="+homeworker_number+"&senderid=PGIMER";
            httpGet(smsurl);

	}
	
	function httpGet(theUrl)
{
    var xmlHttp = new XMLHttpRequest();
    xmlHttp.open( "GET", theUrl, false );
    xmlHttp.send( null );
    return xmlHttp.responseText;
}
function detailsss(mobile)
{
 
	
      var sms_number=mobile;
    var table = document.getElementById("table1");
    var rows = table.rows; // or table.getElementsByTagName("tr");
    for (var i = 0; i < rows.length; i++) {
        rows[i].onclick = (function() {
             var cnt = i; 
            return function() {
              //alert("row"+cnt+" data="+this.cells[0].innerHTML);
			  var rownum=parseInt(cnt)-2;
			  homeworker_number.push(sms_number[rownum]);
            }    
        })(i);
 

}
}
	

	
   </script>
  

  </body>
  </html>